<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wearopia Product Filter</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* 1. CSS Variables - Design Tokens */
      :root {
        --primary-color: #0f6546; /* Deep Green */
        --light-blue: #1e90ff;
        --mid-green: #3cb371;
        --orange-red: #ff4500;
        --dark-navy: #191970;
        --thumb-size: 15px; /* حجم المقبض الجديد */
      }

      /* 2. Filter & Input Styling */
      .filter-container {
        border: 1px solid #e0e0e0;
        padding: 20px;
        border-radius: 8px;
        background: #fff;
      }

      .filter-section-title {
        font-weight: bold;
        color: #343a40;
        margin-bottom: 15px;
        font-size: 1.1rem;
      }

      /* --- PROFESSIONAL RANGE SLIDER STYLING --- */
      .range-slider-container {
        position: relative;
        margin-bottom: 25px;
        height: 30px; /* Space for track and thumbs */
        display: flex;
        align-items: center;
      }

      .price-range-track {
        height: 5px;
        background: #e9ecef;
        border-radius: 5px;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 100%;
        z-index: 1;
      }

      .price-range-active {
        height: 5px;
        background-color: var(--primary-color);
        position: absolute;
        border-radius: 5px;
        z-index: 2;
        transition: left 0.1s ease, width 0.1s ease;
      }

      /* Styling the hidden/overlapping range inputs for dual control */
      .multi-range-input {
        position: absolute;
        width: 100%;
        height: var(--thumb-size);
        background: transparent;
        margin: 0;
        padding: 0;
        cursor: grab;
        z-index: 3;
        top: 50%;
        transform: translateY(-50%);

        /* Reset default browser appearance */
        -webkit-appearance: none;
        appearance: none;
      }
      
      /* Hide the default track entirely for clean custom visualization */
      .multi-range-input::-webkit-slider-runnable-track {
        -webkit-appearance: none;
        background: none;
        height: 0;
      }
      .multi-range-input::-moz-range-track {
        -moz-appearance: none;
        background: none;
        height: 0;
      }
      .multi-range-input::-ms-track {
        -ms-appearance: none;
        background: none;
        height: 0;
      }
      
      /* Style the thumb (The green circle that moves) */
      .multi-range-input::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: var(--thumb-size);
        height: var(--thumb-size);
        border-radius: 50%;
        background: var(--primary-color);
        border: 2px solid white; /* White border for high contrast */
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        cursor: grab;
        /* Vertically center the thumb */
        margin-top: calc((var(--thumb-size) / 2) * -1); 
      }

      .multi-range-input::-moz-range-thumb {
        width: var(--thumb-size);
        height: var(--thumb-size);
        border-radius: 50%;
        background: var(--primary-color);
        border: 2px solid white;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        cursor: grab;
      }
      /* --- END RANGE SLIDER STYLING --- */


      .price-range-inputs {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        margin-bottom: 5px;
      }

      /* 3. Color Swatches (Retained) */
      .color-circle {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 8px;
        cursor: pointer;
        border: 2px solid transparent;
      }

      .color-blue {
        background-color: var(--light-blue);
      }
      .color-green {
        background-color: var(--mid-green);
      }
      .color-orange {
        background-color: var(--orange-red);
      }
      .color-darkblue {
        background-color: var(--dark-navy);
      }

      .color-item {
        margin-bottom: 8px;
        display: flex;
        align-items: center;
      }

      .active-color {
        border-color: #343a40 !important;
        box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
      }

      /* 4. Bootstrap Overrides */
      .form-check-input:checked {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
      }

      .form-check-input:focus {
        box-shadow: 0 0 0 0.25rem rgba(15, 101, 70, 0.25);
      }

      /* Style for read-only price inputs */
      .form-control:disabled {
          background-color: #f8f9fa; 
          opacity: 1; 
          color: #212529; 
          cursor: default;
          text-align: center; 
          font-weight: 600;
          border-color: #e9ecef;
      }

      /* 5. Product Card Styling (NEW/MODIFIED) */
      .custom-card {
        transition: transform 0.2s ease;
      }

      .custom-card:hover {
        transform: translateY(-5px);
      }
      
      /*catalog card styles from your update*/
      .custom-img {
          height: 243px;
          object-fit: cover;
      }

      .custom-icon {
          width: 36px;
          height: 36px;
          display: flex; /* لضمان توسيط الأيقونة */
          justify-content: center;
          align-items: center;
      }

      .custom-btn {
          background-color: #0F6546;
          border: none;
      }

      .custom-btn:hover {
          background-color: #063725;
      }

      @media (min-width: 992px) {
          .custom-card {
              width: 100%; /* تم التعديل لتناسب عرض العمود col-lg-4 */
              height: 400px;
          }
      }

      @media (max-width: 991px) {
          .custom-card {
              width: 100%;
              height: auto;
          }
          .custom-img {
              height: 220px;
          }
      }
      /* End of catalog card styles */
      /* === Professional Pagination Styling === */
.custom-pagination .page-link {
  color: var(--primary-color);
  border: 1px solid #d6d6d6;
  border-radius: 10px;
  margin: 0 4px;
  font-weight: 600;
  padding: 8px 16px;
  transition: all 0.3s ease;
  background-color: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.custom-pagination .page-link:hover {
  background-color: var(--primary-color);
  color: #fff;
  border-color: var(--primary-color);
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(15,101,70,0.2);
}

.custom-pagination .page-item.active .page-link {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
  color: #fff;
  box-shadow: 0 4px 10px rgba(15,101,70,0.25);
  cursor: default;
}

.custom-pagination .page-item.disabled .page-link {
  color: #ccc;
  background-color: #f8f9fa;
  border-color: #e0e0e0;
  box-shadow: none;
  cursor: not-allowed;
}



      /* 6. Footer Styling (Retained) */
      .custom-footer {
        padding: 50px 0;
        margin-top: 50px;
        border-top: 1px solid #eee;
      }

      .social-icon {
        width: 36px;
        height: 36px;
        line-height: 32px;
        text-align: center;
        transition: background-color 0.3s;
      }

      .social-icon:hover {
        background-color: var(--primary-color);
        color: white !important;
        border-color: var(--primary-color) !important;
      }

      .no-products {
        text-align: center;
        color: #888;
        font-style: italic;
        margin-top: 30px;
      }
    </style>
  </head>

  <body>
    <div class="container-fluid my-4">
      <div class="row">
        <div class="col-md-3">
          <div class="filter-container shadow-sm">
            <h5 class="filter-section-title">Filter By Price</h5>
            
            <div class="range-slider-container">
              <div class="price-range-track"></div>
              <div id="price-range-active" class="price-range-active"></div>
              
              <input
                type="range"
                id="min-range-slider"
                class="multi-range-input"
                min="0"
                max="1000"
                value="0" 
                />
              <input
                type="range"
                id="max-range-slider"
                class="multi-range-input"
                min="0"
                max="1000"
                value="1000"
              />
            </div>
            <div class="price-range-inputs">
              <input
                type="text"
                id="min-price"
                class="form-control form-control-sm"
                value="$0" 
                disabled 
              />
              <input
                type="text"
                id="max-price"
                class="form-control form-control-sm"
                value="$1000"
                disabled 
              />
            </div>
            <hr class="my-3" />

            <h5 class="filter-section-title">Filter by size</h5>
            <div class="mb-3">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="XS"
                  id="size-xs"
                /><label class="form-check-label" for="size-xs">XS</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="S"
                  id="size-s"
                /><label class="form-check-label" for="size-s">S</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="M"
                  id="size-m"
                /><label class="form-check-label" for="size-m">M</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="L"
                  id="size-l"
                /><label class="form-check-label" for="size-l">L</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="XL"
                  id="size-xl"
                /><label class="form-check-label" for="size-xl">XL</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="XXL"
                  id="size-xxl"
                /><label class="form-check-label" for="size-xxl">XXL</label>
              </div>
            </div>

            <hr class="my-3" />

            <h5 class="filter-section-title">Categories</h5>
            <div class="mb-3">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Jeans"
                  id="cat-jeans"
                /><label class="form-check-label" for="cat-jeans">Jeans</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Jacket"
                  id="cat-jacket"
                /><label class="form-check-label" for="cat-jacket">Jacket</label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Pullover"
                  id="cat-pullover"
                /><label class="form-check-label" for="cat-pullover"
                  >Pullover</label
                >
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="T-shirt"
                  id="cat-tshirt"
                /><label class="form-check-label" for="cat-tshirt"
                  >T-shirt</label
                >
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Homewear"
                  id="cat-homewear"
                /><label class="form-check-label" for="cat-homewear"
                  >Homewear</label
                >
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Perfume"
                  id="cat-perfume"
                /><label class="form-check-label" for="cat-perfume"
                  >Perfume</label
                >
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="Sportwear"
                  id="cat-sportwear"
                /><label class="form-check-label" for="cat-sportwear"
                  >Sportwear</label
                >
              </div>
            </div>

            <hr class="my-3" />

            <h5 class="filter-section-title">Color</h5>
            <div id="color-filter-group">
              <div class="color-item">
                <span
                  class="color-circle color-blue"
                  data-color="Blue"
                  onclick="toggleColor(this)"
                ></span>Blue
              </div>
              <div class="color-item">
                <span
                  class="color-circle color-green"
                  data-color="Green"
                  onclick="toggleColor(this)"
                ></span>Green
              </div>
              <div class="color-item">
                <span
                  class="color-circle color-orange"
                  data-color="Orange"
                  onclick="toggleColor(this)"
                ></span>Orange
              </div>
              <div class="color-item">
                <span
                  class="color-circle color-darkblue"
                  data-color="Dark Blue"
                  onclick="toggleColor(this)"
                ></span>Dark Blue
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-9">
          <div id="product-grid" class="row g-4"></div>
          <div id="no-products" class="no-products d-none">
            No matching products found. Please adjust your filters.
          </div>
        </div>
      </div>
    </div>
            </div>
      </div>
    </div>
    <!-- ✅✅ Professional Pagination Slider ✅✅ -->
    <nav aria-label="Product navigation" class="d-flex justify-content-center my-5">
      <ul class="pagination custom-pagination mb-0">
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
            <i class="fa-solid fa-angle-left"></i>
          </a>
        </li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
          <a class="page-link" href="#"><i class="fa-solid fa-angle-right"></i></a>
        </li>
      </ul>
    </nav>
    <!-- ✅✅ End of Pagination Slider ✅✅ -->



    <footer
      class="container-fluid bg-white d-flex align-items-center custom-footer"
    >
      <div class="container">
        <div class="row gy-4 gx-5">
          <div class="col-12 col-md-6 col-lg-3">
            <h4 class="fw-bold text-success mb-3 fs-3">Wearopia</h4>
            <p class="text-secondary small mb-4">
              Discover your unique style with our curated collection of modern
              fashion pieces.
            </p>
            <ul class="list-unstyled text-secondary small mb-4">
              <li class="mb-2">
                <i class="fa-solid fa-location-dot me-2"></i>123 Fashion Street,
                Style City, SC 12345
              </li>
              <li class="mb-2">
                <i class="fa-solid fa-phone me-2"></i>+1 (555) 123-STYLE
              </li>
              <li>
                <i class="fa-solid fa-envelope me-2"></i>hello@stylehub.com
              </li>
            </ul>

            <div class="d-flex gap-3">
              <a
                href="#"
                class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 social-icon"
                ><i class="fa-brands fa-facebook-f"></i
              ></a>
              <a
                href="#"
                class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 social-icon"
                ><i class="fa-brands fa-twitter"></i
              ></a>
              <a
                href="#"
                class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 social-icon"
                ><i class="fa-brands fa-instagram"></i
              ></a>
              <a
                href="#"
                class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 social-icon"
                ><i class="fa-brands fa-youtube"></i
              ></a>
            </div>
          </div>

          <div class="col-12 col-md-3 col-lg-3">
            <h5 class="fw-semibold text-black fs-6 mb-3">Quick Links</h5>
            <ul class="list-unstyled text-secondary small">
              <li class="mb-2">New Arrivals</li>
              <li class="mb-2">Best Sellers</li>
              <li class="mb-2">Sale</li>
              <li class="mb-2">Gift Cards</li>
              <li>Style Guide</li>
            </ul>
          </div>

          <div class="col-12 col-md-3 col-lg-3">
            <h5 class="fw-semibold text-black fs-6 mb-3">Customer Care</h5>
            <ul class="list-unstyled text-secondary small">
              <li class="mb-2">Contact Us</li>
              <li class="mb-2">Size Guide</li>
              <li class="mb-2">Shipping & Returns</li>
              <li class="mb-2">Track Your Order</li>
              <li>FAQ</li>
            </ul>
          </div>

          <div class="col-12 col-md-3 col-lg-3">
            <h5 class="fw-semibold text-black fs-6 mb-3">Company</h5>
            <ul class="list-unstyled text-secondary small">
              <li class="mb-2">About Us</li>
              <li class="mb-2">Careers</li>
              <li class="mb-2">Press</li>
              <li class="mb-2">Sustainability</li>
              <li>Investors</li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // --- 1. Product Data ---
      const products = [
        { id: 1, name: "Luxury Silk Scarf", category: "Perfume", size: "XS", color: "Blue", price: 850, oldPrice: 999, image: "Images/black hoddie.png" },
        { id: 2, name: "Denim Trench Coat", category: "Jacket", size: "XXL", color: "Green", price: 699, oldPrice: 850, image: "Images/black hoddie.png" },
        { id: 3, name: "Distressed Slim Jeans", category: "Jeans", size: "XL", color: "Dark Blue", price: 499, oldPrice: 550, image: "Images/black hoddie.png" },
        { id: 4, name: "Wool Blend Pullover", category: "Pullover", size: "S", color: "Orange", price: 259, oldPrice: 350, image: "Images/black hoddie.png" },
        { id: 5, name: "Performance Training Tee", category: "Sportwear", size: "L", color: "Blue", price: 399, oldPrice: 450, image: "Images/black hoddie.png" },
        { id: 6, name: "Lounge Hoodie", category: "Homewear", size: "M", color: "Green", price: 199, oldPrice: null, image: "Images/black hoddie.png" },
        { id: 7, name: "Evening Dress", category: "Perfume", size: "XS", color: "Orange", price: 950, oldPrice: 1100, image: "Images/black hoddie.png" },
        { id: 8, name: "Utility Cargo Jacket", category: "Jacket", size: "XXL", color: "Dark Blue", price: 599, oldPrice: 700, image: "Images/black hoddie.png" },
        { id: 9, name: "Running Leggings", category: "Sportwear", size: "S", color: "Green", price: 179, oldPrice: 220, image: "Images/black hoddie.png" },
        { id: 10, name: "Pajama Set", category: "Homewear", size: "XL", color: "Blue", price: 249, oldPrice: null, image: "Images/black hoddie.png" },
        { id: 11, name: "Cashmere Pullover", category: "Pullover", size: "L", color: "Orange", price: 299, oldPrice: 380, image: "Images/black hoddie.png" },
        { id: 12, name: "High-Rise Skinny Jeans", category: "Jeans", size: "M", color: "Dark Blue", price: 429, oldPrice: 480, image: "Images/black hoddie.png" },
        { id: 13, name: "Basic V-Neck Tee", category: "T-shirt", size: "S", color: "Blue", price: 89, oldPrice: null, image: "Images/black hoddie.png" },
        { id: 14, name: "Oversized T-shirt", category: "T-shirt", size: "XL", color: "Green", price: 129, oldPrice: 150, image: "Images/black hoddie.png" },
        { id: 15, name: "Leather Biker Jacket", category: "Jacket", size: "M", color: "Orange", price: 799, oldPrice: 900, image: "Images/black hoddie.png" },
      ];

      // --- 2. DOM Element References and Constants ---
      const minPriceInput = document.getElementById("min-price"); 
      const maxPriceInput = document.getElementById("max-price"); 
      const minRangeSlider = document.getElementById("min-range-slider"); 
      const maxRangeSlider = document.getElementById("max-range-slider"); 
      const priceRangeActive = document.getElementById("price-range-active");
      const productGrid = document.getElementById("product-grid");
      const noProductsMsg = document.getElementById("no-products");

      const MIN_VISUAL_RANGE = 0;
      const MAX_VISUAL_RANGE = 1000;

      // --- 3. Filtering Helper Functions (Retained) ---
      function getSelectedCheckboxes() {
        return Array.from(
          document.querySelectorAll(
            '.filter-container input[type="checkbox"]:checked'
          )
        ).map((cb) => cb.value);
      }

      function getActiveColors() {
        return Array.from(
          document.querySelectorAll(".color-circle.active-color")
        ).map((c) => c.dataset.color);
      }
      
      // --- 4. Rendering Logic (UPDATED for new card design) ---
      function renderProducts(filteredProducts) {
        productGrid.innerHTML = ""; 

        if (filteredProducts.length === 0) {
          noProductsMsg.classList.remove("d-none");
          return;
        }
        noProductsMsg.classList.add("d-none");

        filteredProducts.forEach((p) => {
          // Logic to conditionally display old price
          const oldPriceHtml = p.oldPrice 
            ? `<span class="text-decoration-line-through text-muted small">$${p.oldPrice.toFixed(2)}</span>`
            : '';

          const card = document.createElement("div");
          // Changed col-lg-4 to col-lg-3 for better product density (matching your CSS media query logic)
          card.className = "col-12 col-sm-6 col-md-4 col-lg-3"; 
          card.innerHTML = `
          <div class="card bg-white border border-light rounded-4 shadow-sm overflow-hidden custom-card">
            <img src="${p.image}" class="card-img-top object-fit-cover custom-img" alt="${p.name}">
            <div class="p-3 d-flex flex-column justify-content-between h-100">
              <div>
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h5 class="fs-6 fw-medium mb-0 text-dark">${p.name}</h5>
                  <div class="d-flex justify-content-center align-items-center rounded-2 shadow-sm bg-white custom-icon">
                    <i class="fa-regular fa-heart"></i>
                  </div>
                </div>
                <div class="d-flex align-items-center mb-3">
                  <span class="fw-semibold fs-6 text-dark me-2">$${p.price.toFixed(2)}</span>
                  ${oldPriceHtml}
                </div>
              </div>
              <button 
  class="btn btn-success rounded-pill w-100 py-2 fw-semibold text-white custom-btn"
  onclick="addToCart(${p.id})">
  Add to Cart
</button>

            </div>
          </div>
          `;
          productGrid.appendChild(card);
        });
      }

      // --- 5. Main Filter Application Logic (Retained) ---

      /** Filters the global products array based on current UI selections and renders the results. */

      
      function applyFilters() {
        // 5.1. Get Price Range from SLIDER inputs
        let min = parseInt(minRangeSlider.value);
        let max = parseInt(maxRangeSlider.value);

        // نستخدم Math.min و Math.max لضمان أن الفلترة منطقية دائماً
        const effectiveMin = Math.min(min, max);
        const effectiveMax = Math.max(min, max);

        // 5.2. Get Checkbox and Color Selections
        const selectedFilters = getSelectedCheckboxes();
        const allSizes = ["XS", "S", "M", "L", "XL", "XXL"];
        const selectedSizes = selectedFilters.filter((v) => allSizes.includes(v));
        const selectedCategories = selectedFilters.filter((v) => !allSizes.includes(v));
        const selectedColors = getActiveColors();

        // 5.3. Filter the Products Array
        const filtered = products.filter((p) => {
          const passesPrice = p.price >= effectiveMin && p.price <= effectiveMax;
          const passesSize = selectedSizes.length === 0 || selectedSizes.includes(p.size);
          const passesCategory = selectedCategories.length === 0 || selectedCategories.includes(p.category);
          const passesColor = selectedColors.length === 0 || selectedColors.includes(p.color);

          return passesPrice && passesSize && passesCategory && passesColor;
        });

        renderProducts(filtered);
      }

      // --- 6. Event Handlers and Initialization (Retained) ---

      /** * Updates the visual price range slider and display inputs, then triggers the main filter.
       * *Crucially* allows Min and Max to move independently for visual freedom.
       */
      function updatePriceTrackAndFilters() {
        let minVal = parseInt(minRangeSlider.value);
        let maxVal = parseInt(maxRangeSlider.value);

        // 6.1. Update Read-Only Display Inputs (Formatted with $)
        minPriceInput.value = `$${minVal}`;
        maxPriceInput.value = `$${maxVal}`;

        // 6.2. Update Visual Track (الشريط الأخضر)
        const totalVisualRange = MAX_VISUAL_RANGE - MIN_VISUAL_RANGE;
        
        // نحدد القيمة الأصغر والأكبر أياً كان موقع المقبضين
        const lesserVal = Math.min(minVal, maxVal);
        const greaterVal = Math.max(minVal, maxVal);

        // حساب نسبة بعد النقطة الأصغر عن البداية (لتحديد مكان الشريط الأخضر)
        const leftPercent = ((lesserVal - MIN_VISUAL_RANGE) / totalVisualRange) * 100;
        // حساب عرض الشريط الأخضر بين النقطتين
        const widthPercent = ((greaterVal - lesserVal) / totalVisualRange) * 100;

        priceRangeActive.style.left = leftPercent + "%";
        priceRangeActive.style.width = widthPercent + "%";

        // 6.3. Apply Filters
        applyFilters();
      }
      
      // Function exposed to global scope for HTML onclick
      window.toggleColor = function (element) {
        element.classList.toggle("active-color");
        applyFilters();
      };

      // Add event listeners for the new interactive range sliders
      // استخدم 'input' للتحديث الفوري أثناء السحب
      minRangeSlider.addEventListener("input", updatePriceTrackAndFilters);
      maxRangeSlider.addEventListener("input", updatePriceTrackAndFilters);

      // Add event listeners for all checkboxes (size and category)
      document
        .querySelectorAll('.filter-container input[type="checkbox"]')
        .forEach((i) => i.addEventListener("change", applyFilters));

      // Initial load: Render all products and set initial slider position
      document.addEventListener("DOMContentLoaded", () => {
        updatePriceTrackAndFilters();
      });


      function addToCart(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;

  // خزن المنتجات داخل localStorage
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.push(product);
  localStorage.setItem("cart", JSON.stringify(cart));

  // بعد التخزين، الانتقال لصفحة السلة
  window.location.href = "shopping-cart.html";
}

    </script>
  </body>
</html>