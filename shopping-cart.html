<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wearopia — Cart (final)</title>

  <!-- Fonts & Bootstrap -->
       <link rel="stylesheet" href="./CSS/hero3.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    /* ---------- Navbar (unchanged layout & measurements) ---------- */
    :root { --green:#195d33; --white:#fff; }
    body { font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif; background:#FEFEFE; color:#121212; margin:0; line-height:1.5; }

    .navbar-wrapper {
      position:sticky; top:0; z-index:1000; background:var(--white);
      box-shadow:0 4px 4px rgba(0,0,0,.25);
      transition:box-shadow .3s, background .3s;
    }
    .navbar-wrapper.scrolled { box-shadow:0 4px 12px rgba(0,0,0,.15); background:rgba(255,255,255,.98); backdrop-filter:blur(6px); }
    .navbar { max-width:1440px; margin:auto; padding:16px 120px; display:flex; justify-content:space-between; align-items:center; }
    .navbar-brand { font-weight:700; font-size:22px; color:var(--green); text-decoration:none; }
    .navbar-nav .nav-link { font-size:15px; color:#222; padding:0 10px; transition:color .2s; }
    .navbar-nav .nav-link:hover, .navbar-nav .nav-link.active { color:var(--green); font-weight:600; }
    .search-box { position:relative; width:240px; margin:0 30px; }
    .search-box input { width:100%; height:36px; border:1px solid #ccc; border-radius:20px; padding:5px 35px 5px 15px; font-size:14px; }
    .search-box i { position:absolute; right:12px; top:50%; transform:translateY(-50%); color:#777; }
    .navbar-icons { display:flex; align-items:center; gap:24px; }
    .navbar-icons a { display:flex; align-items:center; gap:6px; text-decoration:none; color:#333; transition:color .2s, transform .2s; position:relative; }
    .navbar-icons a:hover { color:var(--green); transform:scale(1.05); }
    .badge-count { position:absolute; top:-6px; right:-10px; width:18px; height:18px; background:var(--green); color:#fff; font-size:10px; border-radius:50%; display:flex; align-items:center; justify-content:center; opacity:0; transform:scale(.5); transition:.3s; }
    .badge-count.show { opacity:1; transform:scale(1); }

    @media (max-width:992px) {
      .navbar { flex-direction:column; padding:16px 20px; }
      .navbar-toggler { position:absolute; right:20px; top:22px; border:none; }
      .navbar-collapse { width:100%; padding:15px; margin-top:10px; box-shadow:0 4px 4px rgba(0,0,0,.1); }
      .navbar-nav { flex-direction:column; gap:10px; }
      .navbar-nav .nav-link { padding:8px 0; border-bottom:1px solid #eee; }
      .search-box { width:100%; margin:15px 0; }
      .navbar-icons { justify-content:space-around; padding-top:10px; border-top:1px solid #eee; }
    }

    /* ---------- Cart page styling (kept visuals & spacing) ---------- */
    .container-custom { max-width:1280px; margin:0 auto; padding:40px 24px; }
    .breadcrumb-nav { font-size:14px; color:#605F5F; margin-bottom:24px; }
    .breadcrumb-nav a { color:#605F5F; text-decoration:none; }
    .breadcrumb-nav a:hover { color:#121212; }

.steps-wrapper { display:flex; align-items:center; gap:48px; margin-bottom:48px; justify-content:center; }
    .step-item { display:flex; align-items:center; gap:12px; }
    .step-circle { width:42px; height:42px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:600; font-size:16px; }
    .step-item.active .step-circle { background:#198754; color:#fff; }
    .step-item.inactive .step-circle { background:#E6E8EC; color:#777E90; }
    .step-label { font-size:16px; font-weight:500; color:#23262F; }
    .step-item.inactive .step-label { color:#777E90; }

    .cart-layout { display:grid; grid-template-columns:1fr 413px; gap:64px; align-items:start; }
    .products-section { background:#FCFCFD; border:1px solid #E6E8EC; border-radius:16px; }
    .products-header { display:grid; grid-template-columns:2fr 1fr 1fr 1fr; padding:24px; border-bottom:1px solid #E6E8EC; font-size:12px; font-weight:700; color:#777E90; text-transform:uppercase; letter-spacing:1px; }
    .product-item { display:grid; grid-template-columns:2fr 1fr 1fr 1fr; align-items:center; padding:24px; border-bottom:1px solid #E6E8EC; gap:16px; background:transparent; transition:transform .28s ease, opacity .28s ease; }
    .product-item:last-child { border-bottom:none; }
    .product-info { display:flex; gap:16px; }
    .product-img { width:80px; height:80px; border-radius:12px; object-fit:cover; flex-shrink:0; }
    .product-details { display:flex; flex-direction:column; gap:8px; }
    .product-name { font-size:14px; font-weight:600; color:#23262F; line-height:1.4; }
    .product-variant { font-size:13px; color:#777E90; }

    .btn-remove { background:none; border:none; color:#198754; font-size:14px; font-weight:500; padding:0; cursor:pointer; display:inline-flex; align-items:center; gap:6px; margin-top:6px; transition:color .2s; }
    .btn-remove:hover { color:#23262F; }

    .qty-box { display:inline-flex; align-items:center; border:1px solid #E6E8EC; border-radius:90px; overflow:hidden; background:white; }
    .qty-btn { width:36px; height:36px; border:none; background:transparent; color:#23262F; font-size:18px; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:background .2s; font-weight:400; }
    .qty-btn:hover { background:#F4F5F6; }
    .qty-input { width:40px; height:36px; border:none; text-align:center; font-size:14px; font-weight:600; outline:none; background:transparent; }

    .price-text { font-size:15px; font-weight:600; color:#23262F; }

    .summary-box { background:#FCFCFD; border:1px solid #E6E8EC; border-radius:16px; padding:32px; position:sticky; top:24px; }
    .summary-title { font-size:20px; font-weight:600; margin-bottom:24px; color:#23262F; }
    .summary-row { display:flex; justify-content:space-between; margin-bottom:16px; font-size:15px; }
    .summary-label { color:#777E90; font-weight:400; }
    .summary-value { color:#23262F; font-weight:600; }

    .shipping-options { margin:20px 0; padding:20px 0; border-top:1px solid #E6E8EC; border-bottom:1px solid #E6E8EC; }
    .radio-option { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; cursor:pointer; padding:8px 0; }
    .radio-option input[type="radio"] { margin-right:10px; width:18px; height:18px; cursor:pointer; }
    .radio-left { display:flex; align-items:center; }
    .radio-option label { font-size:14px; color:#23262F; cursor:pointer; font-weight:500; }
    .radio-price { font-size:14px; color:#777E90; font-weight:500; }

    .summary-total { display:flex; justify-content:space-between; margin-top:24px; padding-top:24px; border-top:1px solid #E6E8EC; font-size:20px; font-weight:700; color:#23262F; }
    .btn-checkout { width:100%; background:#198754; color:white; border:none; padding:16px; border-radius:90px; font-size:15px; font-weight:600; cursor:pointer; margin-top:24px; transition:all .3s; }
    .btn-checkout:hover { background:#141416; transform:translateY(-2px); box-shadow:0 8px 16px rgba(35,38,47,.16); }
    .btn-checkout:active { transform:translateY(0); }

    .coupon-section { margin-top:32px; padding-top:32px; border-top:1px solid #E6E8EC; }
    .coupon-title { font-size:16px; font-weight:600; margin-bottom:8px; color:#23262F; }
    .coupon-subtitle { font-size:13px; color:#777E90; margin-bottom:16px; }
    .coupon-input-group { display:flex; gap:12px; }
    .coupon-input { flex:1; padding:12px 16px; border:1px solid #E6E8EC; border-radius:90px; font-size:14px; outline:none; background:white; transition:all .2s; }
    .coupon-input:focus { border-color:#23262F; }
    .btn-apply { padding:12px 28px; background:#198754; color:white; border:none; border-radius:90px; font-size:14px; font-weight:600; cursor:pointer; transition:all .2s; white-space:nowrap; }
    .btn-apply:hover { background:#141416; }

    /* Toast */
    .toast-container { position:fixed; top:24px; right:24px; z-index:9999; }
    .toast-notification { background:white; border-radius:12px; padding:16px 20px; margin-bottom:12px; box-shadow:0 8px 24px rgba(0,0,0,.12); display:flex; align-items:center; gap:12px; min-width:320px; animation:slideInRight .3s ease; border-left:4px solid; }
    .toast-success { border-left-color:#58BD7D; }
    .toast-error { border-left-color:#FF6A55; }
    .toast-warning { border-left-color:#FFB020; }
    .toast-icon { width:24px; height:24px; flex-shrink:0; }
    .toast-content { flex:1; }
    .toast-title { font-size:14px; font-weight:600; color:#23262F; margin-bottom:2px; }
    .toast-message { font-size:13px; color:#777E90; }
    @keyframes slideInRight { from { opacity:0; transform:translateX(100px);} to { opacity:1; transform:translateX(0);} }
    @keyframes fadeOut { to { opacity:0; transform:translateX(100px); } }

    /* Removal animation (slide + fade to the RIGHT) */
    .removing {
      transform: translateX(20px);
      opacity: 0;
      transition: transform .28s ease, opacity .28s ease;
    }

    /* Responsive cart adjustments */
    @media (max-width:991px) {
      .cart-layout { grid-template-columns:1fr; gap:32px; }
      .products-header { display:none; }
      .product-item { grid-template-columns:1fr; gap:16px; }
      .product-info { grid-column:1; }
      .steps-wrapper { gap:20px; }
      .step-label { display:none; }
      .summary-box { position:static; top:auto; }
    }
  </style>
</head>
<body>

  <!-- Navbar (exact) -->
  <div class="navbar-wrapper" id="nav">
    <nav class="navbar navbar-expand-lg">
      <a class="navbar-brand" href="index.html">Wearopia</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0 align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="#">Man</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Women</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Kids</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Accessory</a></li>
        </ul>

        <div class="search-box">
          <input type="text" placeholder="Search for outfits..." />
          <i class="bi bi-search"></i>
        </div>

        <div class="navbar-icons">
          <a href="./login.html"><i class="bi bi-box-arrow-in-right"></i><span>Login</span></a>
          <a href="#" id="wishlist"><i class="bi bi-heart"></i><span>Wishlist</span><span class="badge-count" id="wcount">0</span></a>
          <a href="#" id="cart-link"><i class="bi bi-bag"></i><span>Cart</span><span class="badge-count" id="ccount">0</span></a>
        </div>
      </div>
    </nav>
  </div>

  <!-- Toast container -->
  <div class="toast-container" id="toast-container"></div>

  <!-- Page content -->
  <div class="container-custom">

    <!-- Breadcrumb -->
    <div class="breadcrumb-nav">
      <a href="#">Home</a> / <span>Cart</span>
    </div>

    <!-- Steps -->
    <div class="steps-wrapper">
      <div class="step-item active">
        <div class="step-circle">1</div>
        <div class="step-label">Shopping cart</div>
      </div>
      <div class="step-item inactive">
        <div class="step-circle">2</div>
        <div class="step-label">Checkout details</div>
      </div>
      <div class="step-item inactive">
        <div class="step-circle">3</div>
        <div class="step-label">Order complete</div>
      </div>
    </div>

    <!-- Main Layout -->
    <div class="cart-layout">

      <!-- Left: Products -->
      <div class="products-section">
        <div class="products-header">
          <div>Product</div>
          <div style="text-align:center;">Quantity</div>
          <div style="text-align:right;">Price</div>
          <div style="text-align:right;">Subtotal</div>
        </div>

        <div id="products-list" aria-live="polite" style="visibility:hidden;">
          <!-- If localStorage empty, initial items will be loaded from this HTML first time.
               After that, renderProducts() manages the DOM from saved state. -->
          <div class="product-item" data-id="p1" data-price="19" data-image="https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?q=80&w=800&auto=format&fit=crop" data-name="Grey Acid Wash Wide Leg Jogger" data-variant="Color: Black">
            <div class="product-info">
              <img src="https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?q=80&w=800&auto=format&fit=crop" class="product-img" alt="Jogger">
              <div class="product-details">
                <div class="product-name">Grey Acid Wash Wide Leg Jogger</div>
                <div class="product-variant">Color: Black</div>
                <button class="btn-remove" data-name="Grey Acid Wash Wide Leg Jogger"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M2 2L14 14M14 2L2 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg> Remove</button>
              </div>
            </div>
            <div style="text-align:center;">
              <div class="qty-box">
                <button class="qty-btn qty-dec">−</button>
                <input type="text" class="qty-input" value="2" readonly>
                <button class="qty-btn qty-inc">+</button>
              </div>
            </div>
            <div style="text-align:right;"><div class="price-text">$19.00</div></div>
            <div style="text-align:right;"><div class="price-text item-subtotal">$38.00</div></div>
          </div>

          <div class="product-item" data-id="p2" data-price="19" data-image="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=800&auto=format&fit=crop" data-name="Tray Table" data-variant="Color: Red">
            <div class="product-info">
              <img src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=800&auto=format&fit=crop" class="product-img" alt="Table">
              <div class="product-details">
                <div class="product-name">Tray Table</div>
                <div class="product-variant">Color: Red</div>
                <button class="btn-remove" data-name="Tray Table"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M2 2L14 14M14 2L2 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg> Remove</button>
              </div>
            </div>
            <div style="text-align:center;">
              <div class="qty-box">
                <button class="qty-btn qty-dec">−</button>
                <input type="text" class="qty-input" value="2" readonly>
                <button class="qty-btn qty-inc">+</button>
              </div>
            </div>
            <div style="text-align:right;"><div class="price-text">$19.00</div></div>
            <div style="text-align:right;"><div class="price-text item-subtotal">$38.00</div></div>
          </div>

          <div class="product-item" data-id="p3" data-price="39" data-image="https://images.unsplash.com/photo-1507473885765-e6ed057f782c?q=80&w=800&auto=format&fit=crop" data-name="Table lamp" data-variant="Color: Gold">
            <div class="product-info">
              <img src="https://images.unsplash.com/photo-1507473885765-e6ed057f782c?q=80&w=800&auto=format&fit=crop" class="product-img" alt="Lamp">
              <div class="product-details">
                <div class="product-name">Table lamp</div>
                <div class="product-variant">Color: Gold</div>
                <button class="btn-remove" data-name="Table lamp"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M2 2L14 14M14 2L2 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg> Remove</button>
              </div>
            </div>
            <div style="text-align:center;">
              <div class="qty-box">
                <button class="qty-btn qty-dec">−</button>
                <input type="text" class="qty-input" value="1" readonly>
                <button class="qty-btn qty-inc">+</button>
              </div>
            </div>
            <div style="text-align:right;"><div class="price-text">$39.00</div></div>
            <div style="text-align:right;"><div class="price-text item-subtotal">$39.00</div></div>
          </div>

          <div class="product-item" data-id="p4" data-price="19" data-image="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=800&auto=format&fit=crop" data-name="Tray Table" data-variant="Color: Red">
            <div class="product-info">
              <img src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=800&auto=format&fit=crop" class="product-img" alt="Table">
              <div class="product-details">
                <div class="product-name">Tray Table</div>
                <div class="product-variant">Color: Red</div>
                <button class="btn-remove" data-name="Tray Table"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M2 2L14 14M14 2L2 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg> Remove</button>
              </div>
            </div>
            <div style="text-align:center;">
              <div class="qty-box">
                <button class="qty-btn qty-dec">−</button>
                <input type="text" class="qty-input" value="2" readonly>
                <button class="qty-btn qty-inc">+</button>
              </div>
            </div>
            <div style="text-align:right;"><div class="price-text">$19.00</div></div>
            <div style="text-align:right;"><div class="price-text item-subtotal">$38.00</div></div>
          </div>

          <div class="product-item" data-id="p5" data-price="39" data-image="https://images.unsplash.com/photo-1507473885765-e6ed057f782c?q=80&w=800&auto=format&fit=crop" data-name="Table lamp" data-variant="Color: Gold">
            <div class="product-info">
              <img src="https://images.unsplash.com/photo-1507473885765-e6ed057f782c?q=80&w=800&auto=format&fit=crop" class="product-img" alt="Lamp">
              <div class="product-details">
                <div class="product-name">Table lamp</div>
                <div class="product-variant">Color: Gold</div>
                <button class="btn-remove" data-name="Table lamp"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M2 2L14 14M14 2L2 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg> Remove</button>
              </div>
            </div>
            <div style="text-align:center;">
              <div class="qty-box">
                <button class="qty-btn qty-dec">−</button>
                <input type="text" class="qty-input" value="1" readonly>
                <button class="qty-btn qty-inc">+</button>
              </div>
            </div>
            <div style="text-align:right;"><div class="price-text">$39.00</div></div>
            <div style="text-align:right;"><div class="price-text item-subtotal">$39.00</div></div>
          </div>

        </div>
      </div>

      <!-- Right: Summary -->
      <div class="summary-box">
        <div class="summary-title">Cart summary</div>

        <div class="shipping-options">
          <label class="radio-option">
            <div class="radio-left">
              <input type="radio" name="shipping" value="0" checked>
              <span>Free shipping</span>
            </div>
            <span class="radio-price">$0.00</span>
          </label>
          <label class="radio-option">
            <div class="radio-left">
              <input type="radio" name="shipping" value="15">
              <span>Express shipping</span>
            </div>
            <span class="radio-price">+$15.00</span>
          </label>
          <label class="radio-option">
            <div class="radio-left">
              <input type="radio" name="shipping" value="21">
              <span>Pick Up</span>
            </div>
            <span class="radio-price">%21.00</span>
          </label>
        </div>

        <div class="summary-row">
          <span class="summary-label">Subtotal</span>
          <span class="summary-value" id="subtotal">$0.00</span>
        </div>

        <div class="summary-total">
          <span>Total</span>
          <span id="total">$0.00</span>
        </div>

      <button class="btn-checkout">Checkout</button>

        <div class="coupon-section">
          <div class="coupon-title">Have a coupon?</div>
          <div class="coupon-subtitle">Add your code for an instant cart discount</div>
          <div class="coupon-input-group">
            <input type="text" class="coupon-input" placeholder="Coupon Code" id="coupon-input">
            <button class="btn-apply" id="apply-coupon">Apply</button>
          </div>
        </div>
      </div>

    </div>
  </div>
  <!--third hero section component  -->
<section class="hero3 d-flex flex-column justify-content-center align-items-center text-center">
  <div class="container">
    <h2 class="hero3-title">Stay in Style</h2>
    <p class="hero3-text">
      Subscribe to our newsletter and be the first to know about new arrivals, exclusive offers, and fashion tips.
    </p>

    <form class="hero3-form d-flex align-items-center justify-content-center">
      <div class="input-wrapper">
        <i class="fa-solid fa-envelope email-icon"></i>
        <input
          type="email"
          placeholder="Enter your email"
          class="hero3-input"
          required
        />
      </div>
      <button type="submit" class="btn hero3-btn">Subscribe</button>
    </form>
  </div>
</section>

  <!--footer component-->
    <footer class="container-fluid bg-white d-flex align-items-center py-[40px] px-[40px] md:px-[80px] lg:px-[120px] min-h-[372px]">
        <div class="container">
            <div class="row gy-4 gx-5">
                <div class="col-12 col-md-6 col-lg-3">
                    <h4 class="fw-bold text-success mb-3 fs-3">Wearopia</h4>
                    <p class="text-secondary small mb-4">
                        Discover your unique style with our curated collection of modern fashion pieces.
                    </p>
                    <ul class="list-unstyled text-secondary small mb-4">
                        <li class="mb-2"><i class="fa-solid fa-location-dot me-2"></i>123 Fashion Street, Style City, SC
                            12345</li>
                        <li class="mb-2"><i class="fa-solid fa-phone me-2"></i>+1 (555) 123-STYLE</li>
                        <li><i class="fa-solid fa-envelope me-2"></i>hello@stylehub.com</li>
                    </ul>
                    <div class="d-flex gap-3">
                        <a href="#"
                            class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 w-[36px] h-[36px]">
                            <i class="fa-brands fa-facebook-f"></i>
                        </a>
                        <a href="#"
                            class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 w-[36px] h-[36px]">
                            <i class="fa-brands fa-twitter"></i>
                        </a>
                        <a href="#"
                            class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 w-[36px] h-[36px]">
                            <i class="fa-brands fa-instagram"></i>
                        </a>
                        <a href="#"
                            class="d-flex align-items-center justify-content-center border border-secondary rounded-circle text-dark text-decoration-none fs-6 w-[36px] h-[36px]">
                            <i class="fa-brands fa-youtube"></i>
                        </a>
                    </div>
                </div>
                <div class="col-12 col-md-3 col-lg-3">
                    <h5 class="fw-semibold text-black fs-6 mb-3">Quick Links</h5>
                    <ul class="list-unstyled text-secondary small">
                        <li class="mb-2">New Arrivals</li>
                        <li class="mb-2">Best Sellers</li>
                        <li class="mb-2">Sale</li>
                        <li class="mb-2">Gift Cards</li>
                        <li>Style Guide</li>
                    </ul>
                </div>
                <div class="col-12 col-md-3 col-lg-3">
                    <h5 class="fw-semibold text-black fs-6 mb-3">Customer Care</h5>
                    <ul class="list-unstyled text-secondary small">
                        <li class="mb-2">Contact Us</li>
                        <li class="mb-2">Size Guide</li>
                        <li class="mb-2">Shipping & Returns</li>
                        <li class="mb-2">Track Your Order</li>
                        <li>FAQ</li>
                    </ul>
                </div>
                <div class="col-12 col-md-6 col-lg-3">
                    <h5 class="fw-semibold text-black fs-6 mb-3">Company</h5>
                    <ul class="list-unstyled text-secondary small">
                        <li class="mb-2">About Us</li>
                        <li class="mb-2">Careers</li>
                        <li class="mb-2">Press</li>
                        <li class="mb-2">Sustainability</li>
                        <li>Investors</li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <!--end of footer-->
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    /* ----------------- Utilities & State ----------------- */
    const productsList = document.getElementById('products-list');
    const subtotalEl = document.getElementById('subtotal');
    const totalEl = document.getElementById('total');
    const cartBadge = document.getElementById('ccount');
    const toastContainer = document.getElementById('toast-container');
    const STORAGE_KEY = 'wearopia_cart_v1';

    // helper: show toast
    function showToast(title, message, type = 'success') {
      const icons = {
        success: '<svg class="toast-icon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="#58BD7D"/><path d="M8 12L11 15L16 9" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',
        error: '<svg class="toast-icon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="#FF6A55"/><path d="M15 9L9 15M9 9L15 15" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>',
        warning: '<svg class="toast-icon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" fill="#FFB020"/><path d="M12 7V13M12 16V17" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>'
      };
      const toast = document.createElement('div');
      toast.className = `toast-notification toast-${type}`;
      toast.innerHTML = `${icons[type]}<div class="toast-content"><div class="toast-title">${title}</div><div class="toast-message">${message}</div></div>`;
      toastContainer.appendChild(toast);
      setTimeout(()=>{ toast.style.animation='fadeOut .3s ease forwards'; setTimeout(()=>toast.remove(),300); },3000);
    }

    // read initial items from DOM (only used if no saved state)
    function readInitialFromDOM() {
      const items = [];
      productsList.querySelectorAll('.product-item').forEach(item => {
        items.push({
          id: item.dataset.id || cryptoRandomId(),
          name: item.dataset.name || item.querySelector('.product-name')?.textContent || 'Item',
          variant: item.dataset.variant || item.querySelector('.product-variant')?.textContent || '',
          image: item.dataset.image || item.querySelector('.product-img')?.src || '',
          price: parseFloat(item.dataset.price) || 0,
          qty: parseInt(item.querySelector('.qty-input')?.value) || 1
        });
      });
      return items;
    }

    // tiny random id if none (stable for this session)
    function cryptoRandomId() {
      return 'id_' + Math.random().toString(36).slice(2,9);
    }

    // save state
    function saveState(state) {
      try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); } catch(e){ /* ignore */ }
    }

    // load state
    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return null;
        return JSON.parse(raw);
      } catch(e){ return null; }
    }

    // render products into DOM from state (keeps markup shape)
    function renderProducts(state) {
      // build html for each item (keep same structure as original)
      const html = state.map(item => `
        <div class="product-item" data-id="${escapeHtml(item.id)}" data-price="${item.price}" data-image="${escapeHtml(item.image)}" data-name="${escapeHtml(item.name)}" data-variant="${escapeHtml(item.variant)}">
          <div class="product-info">
            <img src="${escapeHtml(item.image)}" class="product-img" alt="${escapeHtml(item.name)}">
            <div class="product-details">
              <div class="product-name">${escapeHtml(item.name)}</div>
              <div class="product-variant">${escapeHtml(item.variant)}</div>
              <button class="btn-remove" data-name="${escapeHtml(item.name)}"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M2 2L14 14M14 2L2 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg> Remove</button>
            </div>
          </div>
          <div style="text-align:center;">
            <div class="qty-box">
              <button class="qty-btn qty-dec">−</button>
              <input type="text" class="qty-input" value="${item.qty}" readonly>
              <button class="qty-btn qty-inc">+</button>
            </div>
          </div>
          <div style="text-align:right;"><div class="price-text">$${item.price.toFixed(2)}</div></div>
          <div style="text-align:right;"><div class="price-text item-subtotal">$${(item.price*item.qty).toFixed(2)}</div></div>
        </div>
      `).join('');
      productsList.innerHTML = html;
      productsList.style.visibility = 'visible';
    }

    // small helper to escape inserted values
    function escapeHtml(s){ return (s+'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    // compute totals and update UI + navbar badge
    function updateTotals() {
      const items = [...productsList.querySelectorAll('.product-item')];
      let subtotal = 0, qtySum = 0;
      items.forEach(it=>{
        const price = parseFloat(it.dataset.price) || 0;
        const qty = parseInt(it.querySelector('.qty-input').value) || 0;
        const itemTotal = price*qty;
        const subEl = it.querySelector('.item-subtotal');
        if(subEl) subEl.textContent = '$' + itemTotal.toFixed(2);
        subtotal += itemTotal;
        qtySum += qty;
      });
      const shipping = parseFloat(document.querySelector('input[name="shipping"]:checked')?.value || 0);
      const total = subtotal + shipping;
      subtotalEl.textContent = '$' + subtotal.toFixed(2);
      totalEl.textContent = '$' + total.toFixed(2);

      // update navbar badge
      cartBadge.textContent = qtySum;
      if (qtySum > 0) cartBadge.classList.add('show'); else cartBadge.classList.remove('show');

      // persist state automatically
      persistFromDOM();
    }

    // persist state by reading DOM
    function persistFromDOM() {
      const items = [...productsList.querySelectorAll('.product-item')].map(it=>({
        id: it.dataset.id,
        name: it.dataset.name,
        variant: it.dataset.variant,
        image: it.dataset.image,
        price: parseFloat(it.dataset.price)||0,
        qty: parseInt(it.querySelector('.qty-input').value)||1
      }));
      const shipping = document.querySelector('input[name="shipping"]:checked')?.value || '0';
      const coupon = document.getElementById('coupon-input').value || '';
      const state = { items, shipping: parseFloat(shipping)||0, coupon };
      saveState(state);
    }

    /* ------------- Events (delegated) ------------- */

    // handle qty inc/dec & remove via delegation
    productsList.addEventListener('click', (e)=>{
      const inc = e.target.closest('.qty-inc');
      const dec = e.target.closest('.qty-dec');
      if (inc || dec) {
        const box = (inc || dec).closest('.qty-box');
        const input = box.querySelector('.qty-input');
        let v = parseInt(input.value)||0;
        v = inc ? v+1 : Math.max(1, v-1);
        input.value = v;
        updateTotals();
        return;
      }

      const rem = e.target.closest('.btn-remove');
      if (rem) {
        const item = rem.closest('.product-item');
        const name = rem.dataset.name || 'Item';
        // animate removal: add class then remove after transition
        item.classList.add('removing');
        // allow animation then remove
        item.addEventListener('transitionend', function onEnd(ev){
          // ensure we only remove after either opacity or transform transition finishes
          item.removeEventListener('transitionend', onEnd);
          item.remove();
          updateTotals();
          showToast('Item Removed', `${name} has been removed from your cart`, 'success');
        });
      }
    });

    // shipping change
    document.querySelectorAll('input[name="shipping"]').forEach(r=>r.addEventListener('change', updateTotals));

    // coupon apply (keeps same behavior)
    // coupon apply (applies actual discount)
document.getElementById('apply-coupon').addEventListener('click', ()=>{
  const input = document.getElementById('coupon-input');
  const code = input.value.trim().toUpperCase();
  if (!code) { showToast('Missing Code','Please enter a coupon code','warning'); return; }

  // قائمة الكوبونات
  const valid = { 
    'WEAR10': { discount:10, type:'percentage' },
    'SAVE10': { discount:10, type:'percentage' },
    'SAVE20': { discount:20, type:'percentage' },
    'FLAT50': { discount:50, type:'fixed' }
  };

  if (!valid[code]) {
    showToast('Invalid Code','The coupon code you entered is not valid','error');
    return;
  }

  const coupon = valid[code];
  const subtotal = parseFloat(subtotalEl.textContent.replace('$','')) || 0;
  const shipping = parseFloat(document.querySelector('input[name="shipping"]:checked')?.value || 0);

  let discountValue = 0;
  if (coupon.type === 'percentage') discountValue = subtotal * (coupon.discount / 100);
  else discountValue = coupon.discount;

  const total = subtotal + shipping - discountValue;

  totalEl.textContent = '$' + total.toFixed(2);

  showToast('Coupon Applied!', `You saved ${coupon.type === 'percentage' ? coupon.discount + '%' : '$' + coupon.discount} on your order`, 'success');
  
  // حفظ الكوبون في الذاكرة
  const saved = loadState() || {};
  saved.coupon = code;
  saveState(saved);

  input.value = '';
});


    /* ---------- Init sequence: restore state (no flicker) ---------- */
    (function init(){
      // hide container until we render to avoid flicker
      productsList.style.visibility = 'hidden';

      const saved = loadState();
      if (saved && Array.isArray(saved.items)) {
        // render saved state
        renderProducts(saved.items);
        // restore shipping & coupon
        if (saved.shipping) {
          const r = document.querySelector(`input[name="shipping"][value="${saved.shipping}"]`);
          if (r) r.checked = true;
        }
        if (saved.coupon) document.getElementById('coupon-input').value = saved.coupon;
      } else {
        // first load: read items pre-baked in DOM, build state and save
        const initial = readInitialFromDOM();
        renderProducts(initial);
        saveState({ items: initial, shipping: parseFloat(document.querySelector('input[name="shipping"]:checked')?.value||0), coupon: '' });
      }

      // now visible and totals computed
      updateTotals();

      // navbar scroll shadow
      window.addEventListener('scroll', ()=> document.getElementById('nav').classList.toggle('scrolled', window.scrollY>10));
    })();

    // Expose some helpers for console (optional)
    window.__wearopia = { updateTotals, loadState, saveState };




</script>

  

</body>
</html>
